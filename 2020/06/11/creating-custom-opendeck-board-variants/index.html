<!DOCTYPE html > <html lang="en-US"> <!-- Site Head --> <head> <meta charset="utf-8"> <title>Shantea Controls &#8226 Creating custom OpenDeck board variants</title> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="shortcut icon" href="/images/favicon.png" title="Favicon"> <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet"> <!-- Importing Styles --> <link rel="stylesheet" href="/css/style.css"> <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.1.7/css/lightgallery-bundle.min.css"> <style> .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }
  
    @media (max-width: 767px) {
      .markdown-body {
        padding: 15px;
      }
    } </style> </head> <body> <!-- Page Loader --> <div id="page-loader" class="page-loader"><span class="load-icon"></span></div> <!-- Site Header --> <header class="site-header blog-header parallax" id="home" data-scrollax-parent="true"> <!-- Parallax Header Image --> <div class="parallax-wrapper"> <div class="cover" data-scrollax="properties: { 'translateY': '48%' }"> <img style="min-width: 100%;" src="/images/blog/header.jpg"> </div> </div> <div class="container"> <!-- Site Navigation Bar --> <div class="row site-navigation-bar parent"> <!-- Logo --> <div class="col-sm-2 col-xs-4 logo child-center-v"> <a href="/index.html"><img src="/images/logo_notext.svg" width="70"></a> </div> <!-- Toggle Mobile Menu --> <div class="col-xs-8 toggle-menu child-center-v"> <!-- Burger --> <div class="navTrigger"> <i></i><i></i><i></i> </div> </div> <!-- Navigation Bar --> <div class="col-sm-10 col-xs-12 navigation-bar child-center-v"> <!-- Navigation Menu --> <nav id="navMenu" class="nav-menu"> <ul class="menu"> <li><a href="/#about">ABOUT</a></li> <li><a href="/#features">FEATURES</a></li> <li><a href="/#parallax-features">SPECS</a></li> <li><a href="/#portfolio">GALLERY</a></li> <li><a href="/#testimonials">TESTIMONIALS</a></li> <li class="current-menu-item"><a href="/blog">BLOG</a></li> <li><a href="/#prices">OFFERS</a></li> <li><a href="/#contact">CONTACT</a></li> </ul> </nav> </div> </div> <!-- Site Header Banner --> <div class="row header-banner parent" data-scrollax="properties: { 'translateY': '48%', 'opacity': '1.4' }"> <div class="heading-content text-center child-center-v"> <!-- Heading Title --> <div class="row heading-title"> <h2>Shantea Controls</h2> <hr class="small"> <h1 class="thin">Creating custom OpenDeck board variants</h1> </div> </div> </div> </div> </header> <!-- Page Section --> <section class="site-section blog-section page-layout" id="start"> <div class="container"> <!-- Page Layout --> <div class="row"> <!-- Sidebar --> <div class="col-md-4 hidden-xs hidden-sm"> <!-- Site Sidebar --> <aside class="site-sidebar"> <!-- Categories Widget --> <div class="widget categories-widget"> <!-- Widget Header --> <header class="widget-header"> <h4 class="widget-title">Categories</h4> </header> <!-- Widget Content --> <div class="widget-content"> <ul class="categories-box"> <li><a href="/category/info">info <span class="cat-count">8</span></a></li> <li><a href="/category/design">design <span class="cat-count">7</span></a></li> <li><a href="/category/build-log">build-log <span class="cat-count">9</span></a></li> <li><a href="/category/development">development <span class="cat-count">20</span></a></li> <li><a href="/category/programming">programming <span class="cat-count">5</span></a></li> </ul> </div> </div> </aside> </div> <!-- Content --> <div class="col-md-8 blog-articles-container"> <!-- Blog Article --> <div class="post-full"> <article class="blog-article blog-single-page clearfix"> <!-- Article Header --> <!-- Article Content --> <article class="markdown-body"> <p>One of the questions I get asked a lot is: “How do I create my own custom board which uses OpenDeck firmware?”. There was never really a stable way of doing that - just in the last year alone I’ve changed the way new targets/variants are added at least 3 times, each time a bit simpler, so it would make no sense for me to offer detailed answer to that question either here or on the <a href="https://github.com/shanteacontrols/OpenDeck/wiki">OpenDeck wiki</a> - it would get completely changed soon after that anyways.  Obviously, what I needed was stable interface of defining variant which wouldn’t depend on copying the source files to some directory or modifying the build system. No, I needed something very simple and very generic, defined in one file if possible. Well, good news, everyone! There’s now a way of doing exactly that.</p> <p>During the last few weeks, I’ve completely revamped the build system. Board variants aren’t discovered anymore by build system looking for some specific source files in specific directories - instead, <a href="https://github.com/shanteacontrols/OpenDeck/tree/master/targets">single YAML file</a> is used to describe the entire board variant. Below is an example of <a href="https://shanteacontrols.com/2019/08/06/building-dubfocus-controllers/">DubFocus</a> board configuration, which uses 4 analog multiplexers, 2 input shift registers and 2 output shift registers:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
  arch: "avr"
  mcuFamily: "avr8"
  mcu: "atmega32u4"
  usb: true
  dinMIDI:
    use: false
  display:
    use: false
  touchscreen:
    use: false
  buttons:
    type: "shiftRegister"
    shiftRegisters: 2
    pins:
      data:
        port: "D"
        index: 3
      clock:
        port: "D"
        index: 4
      latch:
        port: "D"
        index: 5
  analog:
    extReference: true
    type: "4067"
    multiplexers: 4
    pins:
      s0:
        port: "B"
        index: 3
      s1:
        port: "B"
        index: 1
      s2:
        port: "E"
        index: 6
      s3:
        port: "B"
        index: 2
      z0:
        port: "F"
        index: 7
      z1:
        port: "F"
        index: 6
      z2:
        port: "F"
        index: 5
      z3:
        port: "F"
        index: 4
  leds:
    internal:
      present: false
    external:
      type: "shiftRegister"
      shiftRegisters: 2
      invert: true
      pins:
        data:
          port: "D"
          index: 2
        clock:
          port: "D"
          index: 0
        latch:
          port: "D"
          index: 1
        enable:
          port: "C"
          index: 7
  usbLink:
    type: "none"
  bootloader:
    use: true
    buttonIndex: 12
  release: true
  test: true
</code></pre></div></div> <p>Build system parses this file, adds needed defines for compiler and additional script generates source code with pins. Very simple - parsing process is done automatically by build system so other than to define configuration in YAML file, there is nothing else to do for user. Complete guide on how to define your own board variant is now <a href="https://github.com/shanteacontrols/OpenDeck/wiki/Creating-custom-board-variant">available on OpenDeck wiki</a>.</p> </article> <!-- Article Tool Boxes --> <div class="article-boxes"> <!-- Tags Box --> <div class="tags-article box"> <span class="title">Tags:</span> <ul class="tag-cloud-box box-content"> </ul> </div> <div id="hyvor-talk-view"></div> <script type="text/javascript"> var HYVOR_TALK_WEBSITE = 4484;
          var HYVOR_TALK_CONFIG = {
            url: 'https://shanteacontrols.com/2020/06/11/creating-custom-opendeck-board-variants/',
            id: '/2020/06/11/creating-custom-opendeck-board-variants/'
          }; </script> <script async type="text/javascript" src="//talk.hyvor.com/web-api/embed"></script> </div> </article> </div> </div> </div> </div> </section> <!-- Site Footer --> <footer class="site-footer" id="footer"> <div class="container"> <div class="row"> <div class="col-md-6 col-md-push-3 footer-info text-center"> <div class="footer-logo"> <img src="/images/logo.svg" width="700"> </div> <div class="footer-info-text"> <p></p> </div> <div class="social-icons"> <ul class="icons"> <li><a href="https://youtube.com/shanteacontrols" target="_blank"><i class="fi flaticon-youtube"></i></a></li> <li><a href="https://www.facebook.com/shanteacontrolsmidi" target="_blank"><i class="fi flaticon-facebook"></i></a></li> </ul> </div> </div> <div class="col-md-8 col-md-push-2 footer-copyright"> <div class="footer-text text-center"> <p>All Rights Reserved</p> <p><a href="https://shanteacontrols.com/">Shantea Controls</a> &copy; 2021</p> </div> </div> </div> </div> </footer> <!-- Go To Top Button --> <a href="#home" class="go-to-top-button"><i class="pe-7s-angle-up"></i></a> <!-- Importing Scripts --> <!-- jQuery CDN --> <script src="//ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script> <!-- If CDN fails than use local jQuery --> <script>window.jQuery || document.write('<script src="/js/jquery-3.0.0.min.js"><\/script>')</script> <!-- Owl Carousel --> <script src="/js/carousel.min.js" charset="utf-8"></script> <!-- Parallaxing & SmoothScroll --> <script src="/js/scrollax.min.js" charset="utf-8"></script> <!-- Main JS --> <script src="/js/main.js" charset="utf-8"></script> <!-- LightGallery --> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.1.7/lightgallery.umd.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.1.7/plugins/thumbnail/lg-thumbnail.umd.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.1.7/plugins/zoom/lg-zoom.umd.min.js"></script> <script type="text/javascript"> lightGallery(document.getElementById('gallery-container'), {
        plugins: [lgThumbnail],
        speed: 250,
        licenseKey: "xAIQA"
    }); </script> </body> </html> 