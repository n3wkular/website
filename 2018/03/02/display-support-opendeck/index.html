<!DOCTYPE html > <html lang="en-US"> <!-- Site Head --> <head> <meta charset="utf-8"> <title>Display support on OpenDeck</title> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="shortcut icon" href="/images/favicon.png" title="Favicon"> <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet"> <!-- Importing Styles --> <link rel="stylesheet" href="/css/style.css"> </head> <body> <!-- Page Loader --> <div id="page-loader" class="page-loader"><span class="load-icon"></span></div> <!-- Site Header --> <header class="site-header blog-header parallax" id="home" data-scrollax-parent="true"> <!-- Parallax Header Image --> <div class="parallax-wrapper"> <div class="cover" data-scrollax="properties: { 'translateY': '48%' }"> <img style="min-width: 100%;" src="/images/blog/header.jpg"> </div> </div> <div class="container"> <!-- Site Navigation Bar --> <div class="row site-navigation-bar parent"> <!-- Logo --> <div class="col-sm-2 col-xs-4 logo child-center-v"> <a href="/index.html"><img src="/images/logo_notext.svg" width="70"></a> </div> <!-- Toggle Mobile Menu --> <div class="col-xs-8 toggle-menu child-center-v"> <!-- Burger --> <div class="navTrigger"> <i></i><i></i><i></i> </div> </div> <!-- Navigation Bar --> <div class="col-sm-10 col-xs-12 navigation-bar child-center-v"> <!-- Navigation Menu --> <nav id="navMenu" class="nav-menu"> <ul class="menu"> <li><a href="/#about">ABOUT</a></li> <li><a href="/#features">FEATURES</a></li> <li><a href="/#portfolio">GALLERY</a></li> <li><a href="/#testimonials">TESTIMONIALS</a></li> <li class="current-menu-item"><a href="/#blog">BLOG</a></li> <li><a href="/#prices">OFFERS</a></li> <li><a href="/#contact">CONTACT</a></li> </ul> </nav> </div> </div> <!-- Site Header Banner --> <div class="row header-banner parent" data-scrollax="properties: { 'translateY': '48%', 'opacity': '1.4' }"> <div class="heading-content text-center child-center-v"> <!-- Heading Title --> <div class="row heading-title"> <h2>Shantea Controls</h2> <hr class="small"> <h1 class="thin">Display support on OpenDeck</h1> </div> </div> </div> </div> </header> <!-- Page Section --> <section class="site-section blog-section page-layout" id="start"> <div class="container"> <!-- Page Layout --> <div class="row"> <!-- Sidebar --> <div class="col-md-4 hidden-xs hidden-sm"> <!-- Site Sidebar --> <aside class="site-sidebar"> <!-- Categories Widget --> <div class="widget categories-widget"> <!-- Widget Header --> <header class="widget-header"> <h4 class="widget-title">Categories</h4> </header> <!-- Widget Content --> <div class="widget-content"> <ul class="categories-box"> <li><a href="/category/info">info <span class="cat-count">8</span></a></li> <li><a href="/category/design">design <span class="cat-count">7</span></a></li> <li><a href="/category/build-log">build-log <span class="cat-count">9</span></a></li> <li><a href="/category/development">development <span class="cat-count">20</span></a></li> <li><a href="/category/programming">programming <span class="cat-count">5</span></a></li> </ul> </div> </div> </aside> </div> <!-- Content --> <div class="col-md-8 blog-articles-container"> <!-- Blog Article --> <div class="post-full"> <article class="blog-article blog-single-page clearfix"> <!-- Article Header --> <header class="article-header"> <div class="img-wrap"> <img src="/images/blog/63cee-10-1.jpg" alt="Article Blog Image"> </div> </header> <!-- Article Content --> <div class="article-content"> <p>So far, OpenDeck has been really good (IMO, at least) at handling the common components used to build MIDI controllers. What I’ve been wanting to do for quite some time already is to support displays on OpenDeck. Displays can be quite useful to give you visual representation of what is happening on the device, which is often times faster way than checking the software on your PC or other MIDI hardware. So, I’m happy to announce that OpenDeck software now officially supports LCD and OLED displays, with some limitations at the moment.<img src="/images/blog/68251-1.3-i2c-oled.jpg" alt=""></p> <p><img src="/images/blog/24235-20180218_1923490.jpg" alt=""></p> <p>On OpenDeck, displays are used to display incoming and outgoing MIDI data.</p> <h2 id="hardware">Hardware</h2> <p>On a hardware level, displays are handled using I2C protocol. I’ve chosen it because of its wiring simplicity as I2C only requires two lines for communication, called SDA and SCL. On top of that, I2C is expandable since it supports up to 127 devices on a bus, which is great since that gives me possibility to support other I2C capable hardware on OpenDeck in the future using those same two wires.</p> <h2 id="software">Software</h2> <p>On the software side of things, I’m using <a href="https://github.com/olikraus/u8g2/wiki">U8X8 library</a> since it already supports every relevant display controller out there, so why reinvent the wheel? Great thing about this library is that it writes data to displays directly, making it very lightweight and fast. Another great thing about it is that it allows custom hardware access to the displays. I’ve  written a simple wrapper for the library for easier access, and to allow me to define a display resolution and controller in run-time. Because of this, it’s really simple to configure the display in the Web interface.</p> <h2 id="web-interface-configuration">Web interface configuration</h2> <p>As with all the supported components, display configuration is really simple. There’s a new option called Display on the sidebar in the interface. There are several configurable settings:</p> <ul> <li>Display state - Used to enable or disable the display.</li> <li>Display controller - Used to select controller which controls the display. Currently, only SSD1306 is tested because it’s the only one I have, but as I’ve said already, I’m supporting everything U8X8 library supports, so this isn’t a big issue.</li> <li>Display resolution - Used to select display resolution in pixels. I’ve tested 128x64 and 128x32 resolutions and they both work without issues.</li> <li>Welcome message on startup - When enabled, “Welcome!” text will be printed out letter by letter when the board is turned on.</li> <li>Version info on startup - When enabled, firmware and hardware version will be printed out when the board is turned on. If welcome message is enabled, this message will be printed after it.</li> <li>MIDI event retention - When this is enabled, last incoming or outgoing MIDI message will stay on display indefinitely, until new event happens. When disabled, last MIDI event stays for defined amount of time.</li> <li>Message retention time - Specifies time in seconds during which last MIDI message will be displayed. After this time, MIDI event will be cleared from display.</li> <li>Alternate note display - When this is enabled, MIDI notes will be displayed in “nicer” format, ie. C#2. Otherwise, raw MIDI note number will be displayed (0-127).</li> <li>Octave normalization value - Various software has different way of calculating MIDI octave, since there’s no really standardized way to do it. For instance, if we take MIDI note 0, “nicer” format of it is C (or C0). However, some software will display this note as C-1, and some as C-2. Instead of forcing my own preferred way of calculating it, user has a choice of octave “normalization”. For instance, if normalization is set to 0, than C0 will really be shown as C0. If normalization value is 2, C0 will be displayed as C-2.</li> </ul> <p><img src="/images/blog/17763-28335931_765190873674155_4257037372266251220_o.png" alt=""></p> <h2 id="limitations">Limitations</h2> <p>Currently, displays aren’t supported on official OpenDeck board, which may seem confusing and possibly dumb, but I’ve used all the pins already so I have none of them left, and of top of that, I don’t have enough memory or RAM to implement it, which isn’t ideal and will result in complete redesign of the OpenDeck board some time in the future. I’ve pretty much maxed out possibilities of ATmega32u4 that I’m using on OpenDeck boards. Because of this, displays are supported only on Arduino Mega and Teensy++ 2.0 boards at the moment, since they have much more memory and RAM, as well as free I2C pins.</p> </div> <!-- Article Tool Boxes --> <div class="article-boxes"> <!-- Tags Box --> <div class="tags-article box"> <span class="title">Tags:</span> <ul class="tag-cloud-box box-content"> <li><a href="/tag/arduino">arduino</a></li> <li><a href="/tag/display">display</a></li> <li><a href="/tag/i2c">i2c</a></li> <li><a href="/tag/lcd">lcd</a></li> <li><a href="/tag/oled">oled</a></li> <li><a href="/tag/opendeck">opendeck</a></li> </ul> </div> <div id="hyvor-talk-view"></div> <script type="text/javascript"> var HYVOR_TALK_WEBSITE = 4484;
          var HYVOR_TALK_CONFIG = {
            url: 'https://shanteacontrols.com//2018/03/02/display-support-opendeck/',
            id: '/2018/03/02/display-support-opendeck'
          }; </script> <script async type="text/javascript" src="//talk.hyvor.com/web-api/embed"></script> </div> </article> </div> </div> </div> </div> </section> <!-- Site Footer --> <footer class="site-footer" id="footer"> <div class="container"> <div class="row"> <div class="col-md-6 col-md-push-3 footer-info text-center"> <div class="footer-logo"> <img src="/images/logo.svg" width="700"> </div> <div class="footer-info-text"> <p></p> </div> <div class="social-icons"> <ul class="icons"> <li><a href="https://youtube.com/shanteacontrols" target="_blank"><i class="fi flaticon-youtube"></i></a></li> <li><a href="https://www.facebook.com/shanteacontrolsmidi" target="_blank"><i class="fi flaticon-facebook"></i></a></li> </ul> </div> </div> <div class="col-md-8 col-md-push-2 footer-copyright"> <div class="footer-text text-center"> <p>All Rights Reserved</p> <p><a href="https://shanteacontrols.com/">Shantea Controls</a> &copy; 2021</p> </div> </div> </div> </div> </footer> <!-- Go To Top Button --> <a href="#home" class="go-to-top-button"><i class="pe-7s-angle-up"></i></a> <!-- Importing Scripts --> <!-- jQuery CDN --> <script src="//ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script> <!-- If CDN fails than use local jQuery --> <script>window.jQuery || document.write('<script src="/js/jquery-3.0.0.min.js"><\/script>')</script> <!-- Owl Carousel --> <script src="/js/carousel.min.js" charset="utf-8"></script> <!-- Parallaxing & SmoothScroll --> <script src="/js/scrollax.min.js" charset="utf-8"></script> <!-- Main JS --> <script src="/js/main.js" charset="utf-8"></script> </body> </html> 